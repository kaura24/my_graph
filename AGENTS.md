# Coding Agent Guide

이 문서는 이 프로젝트에서 코드/태스크를 수행하는 AI 에이전트의 동작 원칙과 워크플로우를 정의한다.

> 중요: 실제 작업에 들어가기 전에 반드시 `AGENT_CONTEXT.md`를 읽고 현재 컨텍스트(폴더 정책, UI 레이아웃, 실행 방법)를 숙지하세요.

Primary context: `AGENT_CONTEXT.md`

---

## 1. Workflow Orchestration

### 1.1 Plan Node Default
- **3단계 이상이거나 아키텍처 결정이 필요한 작업**은 반드시 먼저 계획 모드로 진입한다.
- 진행 중 문제가 생기면 **즉시 멈추고 재계획**한다. 그대로 밀어붙이지 않는다.
- 계획 모드는 “검증 단계”에도 적용한다. 구현만 계획하지 말고, 어떻게 검증할지도 명시한다.
- 모호함을 줄이기 위해 **사전에 상세 스펙**을 적는다.

### 1.2 Subagent Strategy
- 메인 컨텍스트를 가볍게 유지하기 위해 **서브에이전트를 적극 활용**한다.
- 조사, 탐색, 병렬 분석은 서브에이전트에 위임한다.
- 복잡한 문제는 서브에이전트를 더 두어 병렬로 처리한다.
- **서브에이전트당 한 가지 목적**으로 집중 실행한다.

### 1.3 Self-Improvement Loop
- **사용자가 수정/피드백을 준 경우 반드시** `tasks/lessons.md`에 패턴을 기록한다.
- 같은 실수를 막는 **규칙**을 스스로 정리해 둔다.
- 실수율이 줄 때까지 이 레슨을 반복해서 개선한다.
- 세션 시작 시 해당 프로젝트와 관련된 레슨을 검토한다.

### 1.4 Verification Before Done
- **동작이 증명되기 전에는 태스크를 완료로 표시하지 않는다.**
- 필요하면 main/브랜치와 변경 사항의 **동작 차이**를 비교한다.
- “시니어 엔지니어가 이 변경을 승인할까?”를 스스로 묻는다.
- 테스트 실행, 로그 확인, 정확성 시연으로 완료를 증명한다.

### 1.5 Demand Elegance (Balanced)
- 비단순 변경 전에 **“더 단순/우아한 방법은 없는가?”**를 한 번 묻는다.
- 수정이 임시방편처럼 느껴지면: “지금 알고 있는 걸 바탕으로 우아한 구현을 하라”고 스스로 요구한다.
- 단순·명확한 수정에는 과도한 설계를 하지 않는다.

### 1.6 Autonomous Bug Fixing
- 버그 제보를 받으면 **바로 수정**한다. 추가 설명을 요구하지 않는다.
- 로그, 에러 메시지, 실패하는 테스트를 짚고 **원인 해결**까지 한다.
- 사용자에게 컨텍스트 전환을 요구하지 않는다.
- CI 실패 시 별도 지시 없이도 **원인 파악 후 수정**한다.

---

## 2. Task Management

1. **Plan First**: `tasks/todo.md`에 체크 가능한 항목으로 계획을 작성한다.
2. **Verify Plan**: 구현에 들어가기 전 계획을 한 번 검토·확정한다.
3. **Track Progress**: 진행하면서 항목을 완료로 표시한다.
4. **Explain Changes**: 단계마다 변경 사항을 높은 수준에서 요약한다.
5. **Document Results**: `tasks/todo.md`에 검토/결과 섹션을 추가한다.
6. **Capture Lessons**: 사용자 수정/피드백 후 `tasks/lessons.md`를 갱신한다.

---

## 3. Core Principles

- **Simplicity First**: 변경은 가능한 한 단순하게, 영향 범위는 최소로 한다.
- **No Laziness**: 근본 원인을 찾는다. 임시 해결만 하지 않는다. 시니어 수준 기준으로 한다.
- **Minimal Impact**: 필요한 부분만 수정한다. 불필요한 버그 유입을 피한다.

---

## 4. File References

| 목적           | 파일/경로           |
|----------------|---------------------|
| 태스크 계획    | `tasks/todo.md`     |
| 레슨/패턴 기록 | `tasks/lessons.md`  |
| 제품 요구사항  | `PRD.md`            |
| 기술 스택      | `TECH_STACK.md`     |

---

에이전트는 이 가이드를 세션 시작 시 참고하고, 위 원칙에 따라 계획·구현·검증·레슨 기록을 수행한다.
